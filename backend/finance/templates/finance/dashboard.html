<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Dashboard</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'finance/dashboard.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="dashboard-container">
    <h1>üìä Finance Dashboard</h1>

    <div class="dashboard-links">
        <a href="{% url 'add_income' %}"><span>üí∞</span> Add Income</a>
        <a href="{% url 'add_expense' %}"><span>üí∏</span> Add Expense</a>
        <a href="{% url 'recurring_income' %}"><span>üîÅ</span> Recurring Income</a>
        <a href="{% url 'recurring_expense' %}"><span>‚è±Ô∏è</span> Recurring Expense</a>
        <a href="{% url 'expense_alerts' %}"><span>üö®</span> Expense Alerts</a>
        <a href="{% url 'income_history' %}"><span>üìú</span> Income History</a>
        <a href="{% url 'expense_log' %}"><span>üí≥</span> Expense Log</a>
        <a href="{% url 'payment_analysis' %}"><span>üìä</span> Payment Analysis</a>
        <a href="{% url 'trends' %}"><span>üìà</span> Trends</a>
        <a href="{% url 'category_manager' %}"><span>üìÇ</span> Category Manager</a>
    </div>
    
    <!-- Summary Boxes -->
    <div class="summary-container">
        <div class="summary-box income-box">
            <h3>Total Income</h3>
            <p>$12,500</p>
        </div>
        <div class="summary-box expense-box">
            <h3>Total Expense</h3>
            <p>$7,200</p>
        </div>
        <div class="summary-box balance-box">
            <h3>Balance</h3>
            <p>$5,300</p>
        </div>
    </div>

    <!-- Charts -->
    <div class="chart-container">
        <canvas id="incomeExpenseChart"></canvas>
    </div>

    <div class="chart-container">
        <canvas id="monthlyTrendsChart"></canvas>
    </div>

    <div class="chart-container">
        <canvas id="categoryExpenseChart"></canvas>
    </div>
</div>

<!-- Chart.js Scripts -->
<script>
// Income vs Expense (weekly)
const ctx1 = document.getElementById('incomeExpenseChart').getContext('2d');
const incomeExpenseChart = new Chart(ctx1, {
    type: 'bar',
    data: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
        datasets: [
            {
                label: 'Income',
                data: [1200, 1500, 1100, 1700],
                backgroundColor: 'rgba(123, 47, 247, 0.7)',
                borderColor: 'rgba(123, 47, 247, 1)',
                borderWidth: 1
            },
            {
                label: 'Expense',
                data: [800, 700, 900, 1000],
                backgroundColor: 'rgba(241, 7, 163, 0.7)',
                borderColor: 'rgba(241, 7, 163, 1)',
                borderWidth: 1
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { labels: { color: 'white' } },
            title: { display: true, text: 'Income vs Expense (Weekly)', color: 'white' }
        },
        scales: {
            x: { ticks: { color: 'white' }, grid: { color: '#333' } },
            y: { ticks: { color: 'white' }, grid: { color: '#333' } }
        }
    }
});

// Monthly Trends (line)
const ctx2 = document.getElementById('monthlyTrendsChart').getContext('2d');
const monthlyTrendsChart = new Chart(ctx2, {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [
            {
                label: 'Income',
                data: [5000, 5500, 4800, 6000, 5800, 6200],
                borderColor: 'rgba(123, 47, 247, 1)',
                backgroundColor: 'rgba(123, 47, 247, 0.3)',
                fill: true,
                tension: 0.3
            },
            {
                label: 'Expense',
                data: [4000, 4200, 3900, 4500, 4300, 4700],
                borderColor: 'rgba(241, 7, 163, 1)',
                backgroundColor: 'rgba(241, 7, 163, 0.3)',
                fill: true,
                tension: 0.3
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { labels: { color: 'white' } },
            title: { display: true, text: 'Monthly Trends', color: 'white' }
        },
        scales: {
            x: { ticks: { color: 'white' }, grid: { color: '#333' } },
            y: { ticks: { color: 'white' }, grid: { color: '#333' } }
        }
    }
});

// Category-wise Expense (doughnut)
const ctx3 = document.getElementById('categoryExpenseChart').getContext('2d');
const categoryExpenseChart = new Chart(ctx3, {
    type: 'doughnut',
    data: {
        labels: ['Rent', 'Food', 'Transport', 'Entertainment', 'Other'],
        datasets: [{
            label: 'Expenses',
            data: [1200, 800, 400, 300, 200],
            backgroundColor: [
                'rgba(123, 47, 247, 0.7)',
                'rgba(241, 7, 163, 0.7)',
                'rgba(58, 123, 213, 0.7)',
                'rgba(255, 193, 7, 0.7)',
                'rgba(76, 175, 80, 0.7)'
            ],
            borderColor: [
                'rgba(123, 47, 247, 1)',
                'rgba(241, 7, 163, 1)',
                'rgba(58, 123, 213, 1)',
                'rgba(255, 193, 7, 1)',
                'rgba(76, 175, 80, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { labels: { color: 'white' } },
            title: { display: true, text: 'Category-wise Expenses', color: 'white' }
        }
    }
});
</script>

</body>
</html>
